@model TuvVision.Models.ReportImageModel

@{
    ViewBag.Title = "ReportImage";
    Layout = "~/Views/Shared/_TuvVision.cshtml";
    int j = 0;
}

@*#001ED2*@
<style>
    #customers {
        font-family: Arial, Helvetica, sans-serif;
        border-collapse: collapse;
        width: 100%;
    }

        #customers td, #customers th {
            border: 1px solid #ddd;
            padding: 8px;
        }

        #customers tr:nth-child(even) {
            background-color: #f2f2f2;

        }

        #customers tr:hover {
            background-color: #ddd;
        }

        #customers th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: left;
            /*background-color: #04AA6D;*/
            background-color: #001ED2;
            color: white;
        }
</style>
<script type="text/javascript" language="javascript" src="~/AllJsAndCss/datatable/js/jquery.dataTables.js"></script>
<script src="~/AllJsAndCss/datatable/js/jquery.dataTables.js"></script>
<script src="~/AllJsAndCss/js/datatable-custom.js"></script>
@*<div class="white-bg section-box-shadow">
    <br />
    <h3 class="dynamic-page-title dynamic-page-title-2">Image</h3>
    <div class="row">*@

        <div class="main-content3 xs-max-height grey-bg-f3">
    <div class="grey-bg-f3">
        <!--Start of header-->
        <div class="container-fluid">
            <div class="col-xs-12 col-sm-offset-1 col-sm-10">

                <div class="col-xs-12 form-col">
                    <div class="row">
                        <br />
                        <h5 class="dynamic-page-title dynamic-page-title-2 " style="padding-left: 11px;">Inspection Visit Report Number : @Session["VisitReportNo"]</h5>
                        @*<a href="@Url.Action("IvrReports","VisitReport")" class="btn btn-info dynamic-function-btn dynamic-function-btn-2"><i class="fa fa-long-arrow-left"></i> Go Back</a>*@



                        <div class="col-xs-12">


                            @if (Model.PK_CALL_ID != 0)
            {
                                <button class="btn btn-default news-btn" type="button" onclick="location.href='@Url.Action("VisitReportForm", "VisitReport",new { @PK_Call_ID = Model.PK_CALL_ID,@PK_RM_ID = Model.abcid} )'">General</button>
                                        <button class="btn btn-default news-btn" type="button" onclick="location.href='@Url.Action("ItemDescription", "VisitReport",new { @PK_Call_ID = Model.PK_CALL_ID,@PK_RM_ID = Model.abcid} )'">Item Description</button>
                                        <button class="btn btn-default news-btn" type="button" onclick="location.href='@Url.Action("ReferenceDocuments", "VisitReport",new { @PK_Call_ID = Model.PK_CALL_ID,@PK_RM_ID = Model.abcid} )'">Reference Documents</button>
                                        <button class="btn btn-default news-btn" type="button" onclick="location.href='@Url.Action("InspectionActivites", "VisitReport",new { @PK_Call_ID = Model.PK_CALL_ID,@PK_RM_ID = Model.abcid} )'">Stages Witnessed</button>
                                        <button class="btn btn-default news-btn" type="button" onclick="location.href='@Url.Action("DocumentReviewed", "VisitReport",new { @PK_Call_ID = Model.PK_CALL_ID,@PK_RM_ID = Model.abcid} )'">Document Reviewed</button>
                                        <button class="btn btn-default news-btn" type="button" onclick="location.href='@Url.Action("EquipmentDetails", "VisitReport",new { @PK_Call_ID = Model.PK_CALL_ID,@PK_RM_ID = Model.abcid} )'">Details Of Measuring Instrument</button>
                                        <button class="btn btn-default news-btn" type="button" onclick="location.href='@Url.Action("Conclusion", "VisitReport",new { @PK_Call_ID = Model.PK_CALL_ID,@PK_RM_ID = Model.abcid} )'">Conclusion</button>
                                        <button class="btn btn-default insert-form-btn" type="button" onclick="location.href='@Url.Action("ReportImage", "VisitReport",new { @PK_Call_ID = Model.PK_CALL_ID,@PK_RM_ID = Model.abcid} )'">Image</button>
                                        <button class="btn btn-default news-btn" type="button" onclick="location.href='@Url.Action("IvrReports", "VisitReport",new { @PK_CALL_ID = Model.PK_CALL_ID,@PK_RM_ID = Model.abcid} )'">Report</button>
                                        <button class="btn btn-default news-btn" type="button" onclick="location.href='@Url.Action("AllConcern", "VisitReport",new { @PK_CALL_ID = Model.PK_CALL_ID , @PK_RM_ID = Model.abcid} )'">List of Issues</button>

                            }
                            </div>



                        <div class="col-xs-12">
                            <div class="white-bg section-box-shadow">
                                <h3 class="form-page-title">Image</h3>
                                <div class="row">
                                    <div class="col-xs-12 col-sm-offset-1 col-sm-10">

                                        <div class="form-box">
                                            <form method="post" enctype="multipart/form-data">

                                                @Html.HiddenFor(m => m.PK_CALL_ID)
                                                @Html.HiddenFor(m => m.PK_IP_Id)
                                                @Html.HiddenFor(m => m.abcid)
                                                <div class="row">

                                                    @*<div class="col-xs-12 col-sm-6">
                                                        <div class="form-group">
                                                            <label>Heading:</label>

                                                            @Html.TextBoxFor(model => model.Heading, new { @placeholder = "Heading", @class = "form-control" })
                                                            @Html.ValidationMessageFor(model => model.Heading, "", new { @class = "text-danger validation-msg" })
                                                        </div>
                                                    </div>*@

                                                    <div class="col-xs-12 col-sm-6">
                                                        <div class="form-group">
                                                            <label>
                                                                Select Images  <span class="required"></span><b style="color:red;">(Max 18 Images Allowed to upload)</b><br />
                                                                @*<span>Size :- (56h * 56w)</span>*@
                                                            </label>
                                                            @*@Html.TextBoxFor(m => m.Image, new { @class = "form-control", @type = "file" })*@
                                                            <input type="file" class="inputupload" name="img_Banner" id="img_Banner" multiple/>
                                                            @Html.HiddenFor(m => m.Image)
                                                            @if (Model != null)
                                                                    {
                                                                <a href="~/ImageUpload/@Html.DisplayFor(m => m.Image)">
                                                                @*<a href="~/Content/CompressFiles/@Html.DisplayFor(m => m.Image)">*@
                                                                    @*<img src="@Url.Content("~/CompressFiles/"+@Html.DisplayFor(m => m.Image))" width="75" height="75" />*@
                                                                    @Html.ValidationMessageFor(m => m.Image, "", new { @class = "text-danger", })
                                                                </a>
                                                                        @*<img src="@Url.Content("~/Content/Uploads/Images/" + Html.DisplayFor(m => m.Image))" width="100" height="100" />*@
                                                                    }
                                                        </div>
                                                    </div>



                                                </div>


                                                <div class="col-xs-12 text-center" id="IVRPointerEvents">

                                                    <button type="submit" class="btn btn-default insert-form-btn">Upload Images</button>

                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
@using (Html.BeginForm("SaveHeading", "VisitReport", FormMethod.Post, new { enctype = "multipart/form-data", @id = "formiid" }))
{
@Html.HiddenFor(m => m.PK_CALL_ID)
                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="col-xs-12">
                                            <table id="customers" class="display custom-table" cellspacing="0" width="100%">

                                                <thead>
                                                    <tr>
                                                        <th class="hidden">Id</th>
                                                        <th class="remove-search" width="5%">Sr No </th>
                                                        <th class="remove-search" width="40%">Heading</th>
                                                        <th class="remove-search" width="40%" style="text-align:center;">Image</th>
                                                        <th class="remove-search" width="15%">Tick to Delete
                                                            <input type="checkbox" name="ID" class="custom-checkbox chkCheckBoxId" id="DeleteImageById" />
                                                        </th>
                                                    </tr>
                                                </thead>

                                                <tbody>

                                                    @{
                                                        int i = 0;
                                                    }
                                                    @*@foreach (var item in ViewData["CostSheet"] as IEnumerable<TuvVision.Models.ReportImageModel>)*@
@foreach (var item in ViewBag.CostSheet as IEnumerable<TuvVision.Models.ReportImageModel>)
{

    i = i + 1;
                                                        <tr>
                                                            @Html.HiddenFor(model => model.Activity[j].PK_CALL_ID, new { @placeholder = "ID", @Value = item.PK_CALL_ID, @class = "form-control" })
                                                            <td class="hidden">@Html.HiddenFor(model => model.Activity[j].PK_IP_Id, new { @placeholder = "ID", @Value = item.PK_IP_Id, @class = "form-control" })</td>
                                                            @*<td>@Html.TextBoxFor(Model => Model.PK_IP_Id, new { @value = item.PK_CALL_ID, id = "v", Class = "single-checkbox1" })</td>*@
                                                            <td width="5%">@i</td>
                                                            @*<td>@Html.TextBoxFor(Model => Model.Heading, new { value = @item.Heading, id = "v", Class = "single-checkbox1" })</td>*@
                                                            <td width="50%">
                                                                @Html.TextBoxFor(model => model.Activity[j].Heading, new { @placeholder = "Heading", @Value = item.Heading, @class = "form-control" })
                                                            </td>
                                                            <td width="40%" align="center">
                                                                <a href="~/CompressFiles/@item.Image">
                                                                    <img src="~/CompressFiles/@item.Image" height="150px" width="250px" />
                                                                </a>

                                                            </td>
                                                            <td class="less-width" width="5%">
                                                                @*<a href="@Url.Action("ReportImage", "Visitreport", new {@PK_IP_Id = item.PK_IP_Id })" title="Edit"><span class="fa fa-pencil"></span>&nbsp;</a>*@
                                                                @*<input type="checkbox" name="DeleteImageById" id="DeleteImageById" value="@item.PK_IP_Id" class="chkCheckBoxId" />*@
                                                                @Html.CheckBoxFor(model => model.Activity[j].chkbox, new { @placeholder = "Heading", @class = "chkCheckBoxId" })
                                                                @*<a href="@Url.Action("DeleteImage", "Visitreport", new { @aid = item.PK_IP_Id, @kid = item.PK_CALL_ID })" onclick="return confirm('Are you sure you want to Delete this Record?')" title="Delete"><span class="fa fa-trash-o"></span>&nbsp;</a>*@
                                                                @{
                                                                    @*if ((Convert.ToString(TempData["InsertCompany"])) != "" && Convert.ToString(TempData["InsertCompany"]) != null)
            {
                TempData["InsertCompany"] = null;
                <script type="text/javascript" language="javascript">
                    alert("Item Description Added Successfully...");
                </script>
            }
            if ((Convert.ToString(TempData["UpdateCompany"])) != "" && Convert.ToString(TempData["UpdateCompany"]) != null)
            {
                TempData["UpdateCompany"] = null;
                <script type="text/javascript" language="javascript">
                    alert("Item Description Updated Successfully...");
                </script>
            }*@
                                                                }
                                                            </td>

                                                        </tr>
                                                                        j++;
                                                                    }
                                                </tbody>
                                            </table>
                                        </div>



                                        <!--Contact Details By Manoj -->


                                    </div><!-- /.box-shadow -->

                                </div>



    <div class="col-xs-12 text-center">

        <button type="submit" class="btn btn-default insert-form-btn">Save Heading</button>

    <button type="submit" value="Delete" class="btn btn-default insert-form-btn" style="background-color:red;" onclick="return confirm('Do you want to delete the selected Image(s)?')"><i class="fa fa-trash-o"></i> Delete</button>

    </div>
}


                                <script type="text/javascript">

        $(document).ready(function () {

            $('#DeleteImageById').click(function () {
                if ($(this).is(":checked")) {
                    $(".chkCheckBoxId").prop("checked", true)
                }
                else {
                    $(".chkCheckBoxId").prop("checked", false)
                }
            });
        });
                                </script>             


                            </div>
                        </div>


                    </div>
                </div>
            </div>


        </div>
    </div>
</div>



                                                <div class="main-content3 xs-max-height">

                                                    <!--Start of header-->
                                                    <div class="container-fluid">
                                                        @*<div class="row assignfixedwidth rp-15">

                                <h3 class="form-page-title">Report Image</h3>
                                <div class="col-xs-12">
                                    <hr class="custom-hr">
                                </div><!-- /.col -->
                                <!--Table was here-->

                            </div><!-- /.row -->*@

                                                       
                                                    </div>
                                                </div>
                                                <!--End of Ashwini Code-->



                                                @*}*@


<script>
    var isConfirmationIVR = @Session["IsConfirmationIVR"] ?? 0;
    // JavaScript to disable pointer events if isConfirmationIVR is 1

    if (isConfirmationIVR == 1) {
        document.getElementById("IVRPointerEvents").style.pointerEvents = "none";
    }
</script>