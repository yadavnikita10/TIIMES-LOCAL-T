



@model TuvVision.Models.LessionLearntModel
@using NonFactors.Mvc.Grid;
@using System.Web.Mvc;
@using System.Configuration;

@{
    ViewBag.Title = "LessonLearnt";
    Layout = "~/Views/Shared/_TuvVision.cshtml";
}
<style>
    .ifa {
        pointer-events: none;
    }
  .dataTables_filter, .dataTables_info {
        display: none;
    }
</style>

<div class="main-content3 xs-max-height">

    <!--Start of header-->
    <div class="container-fluid">
        <div class="row assignfixedwidth rp-15">

            <!-- /.col -->
            <!--Table was here-->
            <div class="col-xs-12">
                <b>Lesson Learnt-[@Model.StrLessionLeantID]</b>

           
            </div>
            <div class="col-xs-12">
                <hr class="custom-hr">
            </div><!-- /.col -->
        </div>



        <div class="col-xs-12">
            <div class="form-group">
                <label></label>
                <button type="button" class="btn btn-info dynamic-function-btn dynamic-function-btn-2" id="a" value="ExportToExcel" onclick="location.href='@Url.Action("GetLessionLearntUselist","MisReport" , new { ID = Model.LessionLeantID })'">
                    Export To Excel
                      </button>
            </div>
        </div>


        <div class="col-xs-12">
            <table id="example" class="display" cellspacing="0" width="100%">
                <thead>
                    <tr>

                        <<th>Name </th>
                         <th>Employee Code </th>
                          <th>Branch</th>
                           <th>Email ID</th>
                           <th>Mobile Number  </th>
                            <th>User Role </th>
                             <th>Viewed On </th>
                              <th>User Read and Not Read</th>
                    </tr>
                </thead>

                <tbody>
                    @if (Model.dtLessionLeant != null && Model.dtLessionLeant.Rows.Count != 0)
                    {
                        for (
                            int cnt = 0; cnt < Model.dtLessionLeant.Rows.Count; cnt++)
                        {
                            System.Data.DataRow row = Model.dtLessionLeant.Rows[cnt];
                            <tr>
                                <td align="left">@row["Name"]</td>
                                <td align="left">@row["Employee Code"]</td>
                                <td align="left">@row["Branch"]</td>
                                <td align="left">@row["Email ID"]</td>
                                <td align="left">@row["Mobile Number"]</td>
                                <td align="left">@row["User Role"]</td>
                                <td align="left"> @row["Viwed On"]
                                    @*@Html.Hidden(@row["LessonsLearnt_ID"].ToString())*@
                                </td>
                                <td align="left">@row["ReadNotReadUser"]</td>
                             

                            </tr>
                        }
                    }

                </tbody>

            </table>

        </div>
    </div>

</div>
<div class="modal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-fullscreen" role="document" style="width:100%">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">View Attachment</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="height:500px">
                <iframe id="_iframe" style="width:100%;height:100%"></iframe>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" language="javascript" src="~/AllJsAndCss/datatable/js/jquery.dataTables.js"></script>


<script type="text/javascript" language="javascript" src="~/AllJsAndCss/js/dataTables.buttons.min.js"></script>
@*<script type="text/javascript" language="javascript" src="~/AllJsAndCss/js/jszip.min.js"></script>*@
<script type="text/javascript" language="javascript" src="~/AllJsAndCss/js/buttons.html5.min.js"></script>
<script src="~/AllJsAndCss/js/datatable-custom2.js"></script>

<script>
    //disable con+s button
    $(document).bind('keydown', function (e) {
        if (e.ctrlKey && (e.which == 83)) {
            alert("contr + s disabled");
            e.preventDefault();
            return false;
        }
    });

    function openPopUp(e) {

        var fileid = $(e).attr('fileid');
        var tabletype = $(e).attr('tabletype');

        $.ajax({
            url: '@Url.Action("Download1", "MisReport")',
            type: 'post',
            datatype: 'json',
            data: { d: fileid, TableType: tabletype },
            success: function (result) {
                $("#_iframe").attr("src", `${result}#toolbar=0`);
                $(".modal").modal('show');
                setTimeout(() => {
                    console.log(document.getElementById('download'));
                },3000)
            },
            error: function (result) {

            }

        });




    }
</script>


<script>

    $(document).ready(function () {
        $(".complaint").addClass('d-none');
        setTimeout(() => {
            $('.complaint').removeClass('d-none');
            $('.complaint').addClass('d-block');
            console.log('Button Activated')
        }, 20000)

    })

</script>
