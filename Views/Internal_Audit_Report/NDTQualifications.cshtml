@model List<TuvVision.Models.NDTQualification>

@using NonFactors.Mvc.Grid;
@using System.Web.Mvc;

@{
    ViewBag.Title = "NDTQualification";
    Layout = "~/Views/Shared/_TuvVision.cshtml";
}

<link href="~/AllJsAndCss/css/MVCGridN.css" rel="stylesheet" />
@using (Html.BeginForm("NDTQualification", "Internal_Audit_Report", FormMethod.Post, new { enctype = "multipart/form-data", @id = "form1" }))
{
    <div class="main-content3 xs-max-height">
        <div class="container-fluid">
            <div class="row assignfixedwidth rp-15">
                <div class="col-xs-12">
                    <h3 class="dynamic-page-title dynamic-page-title-2  text-left">NDT Qualifications</h3>
                    <a href="@Url.Action("GenerateCertificate", "Internal_Audit_Report")" style="margin-left: 10px" class="btn btn-info dynamic-function-btn dynamic-function-btn-2">View Certificate</a>
                    <a href="~/Excel/NDTQualificationReport.xlsx" style="margin-left: 10px" class="btn btn-info dynamic-function-btn dynamic-function-btn-2">Download Template</a>
                    <a href="@Url.Action("UploadBulkNDT", "Internal_Audit_Report")" style="margin-left: 10px" class="btn btn-info dynamic-function-btn dynamic-function-btn-2">Upload Excel</a>
                    
                        <button type="button" id="a" value="ExportToExcel" class="btn btn-info dynamic-function-btn dynamic-function-btn-2" onclick="location.href='@Url.Action("ExportNDTIndex","Internal_Audit_Report")'">
                            Export To Excel
                        </button>
                   
                </div>
                <div class="col-xs-12">
                    <hr class="custom-hr">
                </div>
            </div>

            <div class="col-xs-12">
                <table class="display dataTable no-footer" style="overflow-y:auto" id="gridMapping">
                    <tr>
                        <td>
                    @(Html.Grid(Model)

                    .Build(columns =>
                    {

                        columns.Add(c => c.FirstName + ' ' + c.LastName).Titled("Name").Filterable(true).FilteredAs("custom").Sortable(true).Css("aa");
                        columns.Add(c => c.RollNo).Titled("RollNo");
                        columns.Add(c => c.EmpCode).Titled("EmployeeCode");
                        columns.Add(c => c.Branch).Titled("Branch");
                        columns.Add(c => !string.IsNullOrEmpty(c.MT_Perc) ? $"{Convert.ToDecimal(c.MT_Perc):0.00}%" : "").Titled("MT_Perc");

                        columns.Add(c => c.MT_Cert_Date).Titled("MT_Cert_Date");
                        columns.Add(c => !string.IsNullOrEmpty(c.PT_Perc) ? $"{Convert.ToDecimal(c.PT_Perc):0.00}%" : "").Titled("PT_Perc");

                        columns.Add(c => c.PT_Cert_Date).Titled("PT_Cert_Date");
                        columns.Add(c => !string.IsNullOrEmpty(c.VT_Perc) ? $"{Convert.ToDecimal(c.VT_Perc):0.00}%" : "").Titled("VT_Perc");

                        columns.Add(c => c.VT_Cert_Date).Titled("VT_Cert_Date");
                        columns.Add(c => !string.IsNullOrEmpty(c.UT_Perc) ? $"{Convert.ToDecimal(c.UT_Perc):0.00}%" : "").Titled("UT_Perc");


                        columns.Add(c => c.UT_Cert_Date).Titled("UT_Cert_Date");
                        columns.Add(c => !string.IsNullOrEmpty(c.RT_Perc) ? $"{Convert.ToDecimal(c.RT_Perc):0.00}%" : "").Titled("RT_Perc");


                        columns.Add(c => c.RT_Cert_Date).Titled("RT_Cert_Date");
                        //columns.Add(c => c.Image).Titled("Image").Encoded(false).RenderedAs(c => $"<img src='{c.Image}' alt='Image' style='width:50px;height:50px;' />");

                    })
                            .Pageable(pager =>
                            {
                                //pager.PageSizes = new DictionaryInt32, String > { { 0, "All" }, { 2, "2" }, { 4, "4" } };
                                pager.ShowPageSizes = true;
                                pager.PagesToDisplay = 3;
                                pager.CurrentPage = 1;
                                pager.RowsPerPage = 2;
                            })
                            .UsingFilterMode(GridFilterMode.Row)
                            .Empty("No data found")
                            .Filterable()
                            .Sortable()


                            )
                        </td>
                    </tr>


                </table>
            </div>
        </div>
    </div>
}

<script>
    [].forEach.call(document.getElementsByClassName('mvc-grid'), function (element) {
        new MvcGrid(element);
    });
</script>
