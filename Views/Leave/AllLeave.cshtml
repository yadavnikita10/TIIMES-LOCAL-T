@model TuvVision.Models.Leave
@{
    ViewBag.Title = "AllLeave";
    Layout = "~/Views/Shared/_TuvVision.cshtml";
}


<link href="~/AllJsAndCss/css/MVCGridN.css" rel="stylesheet" />
<script type="text/javascript" language="javascript" src="~/AllJsAndCss/datatable/js/jquery.dataTables.js"></script>


<script type="text/javascript" language="javascript" src="~/AllJsAndCss/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" language="javascript" src="~/AllJsAndCss/js/jszip.min.js"></script>
@*<script type="text/javascript" language="javascript" src="~/AllJsAndCss/js/buttons.html5.min.js"></script>*@
<script src="~/AllJsAndCss/js/datatable-custom2.js"></script>
@if (TempData["Message"] != null)
{
    <script>
         alert(TempData["Message"]);
    </script>
    TempData["Message"] = null;

}




<script>
    function validateForm()
    {

        return true;
    }

</script>



<style>
    .ifa {
        pointer-events: none;
    }

    .dataTables_filter, .dataTables_info {
        display: none;
    }
</style>

@using (Html.BeginForm("AllLeave", "Leave", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{


    <div class="main-content3 xs-max-height">

        <!--Start of header-->
        <div class="container-fluid">
            <div class="row assignfixedwidth rp-15">

                <!-- /.col -->
                <!--Table was here-->
                <div class="row">
                    <div class="col-xs-12">
                        <div class="col-xs-12 col-sm-4">

                            <h3 class="dynamic-page-title dynamic-page-title-2  text-left">Leave Management</h3>

                        </div>
                        <div class="col-xs-12 col-sm-8">
                            @*<button class="btn btn-default news-btn" type="button" onclick="location.href='@Url.Action("AllLeave", "Leave")'">All Leave</button>*@
                            <a href="@Url.Action("LeaveManagementApprover","Leave")" class="btn btn-default news-btn" style="float:right;"><i class="fa fa-long-arrow-left"></i> Go Back</a>
                        </div>

                    </div>
                </div>

                <div class="col-xs-12">
                    <hr class="custom-hr">
                </div><!-- /.col -->

            </div>

            <div class="row">


                <div class="col-xs-12" id="Lessiondata">
                    <table id="example" class="display custom-table" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                
                                <th>Approvel Status</th>
                                <th>Employee Name</th>
                                <th>Selected Dates</th>
                                <th>Type of Leaves</th>
                                <th>Reason</th>
                                <th>Are leaves due to safety incident </th>
                                <th>Leave Application Form</th>
                                <th>Medical Certificate</th>
                                <th>Unique Number (UIN)</th>
                            </tr>
                        </thead>

                        <tbody>
                            @if (Model.dtLeave != null && Model.dtLeave.Rows.Count != 0)
                            {
                                for (
                                    int cnt = 0; cnt < Model.dtLeave.Rows.Count; cnt++)
                                {
                                    System.Data.DataRow row = Model.dtLeave.Rows[cnt];
                                    <tr>
                                       
                                        <td>@row["Status"]</td>
                                        <td align="left">@row["Name"]</td>
                                        <td align="left">@row["Startdate"]</td>
                                        <td align="left">@row["ActivityType"]</td>
                                        <td align="left" title="@row["Reason"]"><img src="~/View1.png" /></td>

                                        @*<td align="left">@row["Reason"]</td>*@
                                        <td align="left">@row["ChkLTILeave"]</td>
                                        @if (row["LeaveApplication"] != null && row["LeaveApplication"].ToString() != "")
                                        {
                                            var attach6 = row["LeaveApplication"].ToString().Split(',');

                                            <td align="left" width="50px">
                                                @for (int ar1 = 0; ar1 < attach6.Length; ar1++)
                                                {
                                                    var attach6PCert = attach6[ar1].ToString().Split('|');


                                                    <a class="title" href="@Url.Action("Download1", "Leave", new { @d = attach6PCert[1].ToString(),@TableType = "other" })"><img src="~/View1.png" /></a><br />
                                                }
                                            </td>
                                        }
                                        else
                                        {
                                            <td align="left" width="50px">&nbsp;</td>
                                        }
                                        @if (row["Seak"] != null && row["Seak"].ToString() != "")
                                        {
                                            var attach6 = row["Seak"].ToString().Split(',');

                                            <td align="left" width="50px">
                                                @for (int ar1 = 0; ar1 < attach6.Length; ar1++)
                                                {
                                                    var attach6PCert = attach6[ar1].ToString().Split('|');


                                                    <a class="title" href="@Url.Action("Download1", "Leave", new { @d = attach6PCert[1].ToString(),@TableType = "seak" })"><img src="~/View1.png" /></a><br />
                                                }
                                            </td>
                                        }
                                        else
                                        {
                                            <td align="left" width="50px">&nbsp;</td>
                                        }
                                        <td align="left">@row["uniqueNumber"]</td>








                                    </tr>
                                }
                            }

                        </tbody>

                    </table>



                </div>
               
            </div>


        </div>

    </div>

}





