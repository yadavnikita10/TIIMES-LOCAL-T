    @model TuvVision.Models.StampRegister
@{
    ViewBag.Title = "CreateStampRegister";
    Layout = "~/Views/Shared/_TuvVision.cshtml";
    string[] ps;
}

@using (Html.BeginForm())
{
    <div class="main-content3 xs-max-height grey-bg-f3">
        <div class="grey-bg-f3">
            <!--Start of header-->
            <div class="container-fluid">
                <div class="row assignfixedwidth rp-5">

                    <div class="col-xs-12 form-col">
                        <div class="row">

                            <div class="col-xs-12 text-right">
                                <a href="@Url.Action("ListStampRegister", "StampRegister")" class="btn btn-info dynamic-function-btn"><i class="fa fa-long-arrow-left"></i>Back</a>

                            </div>

                            <div class="col-xs-12">
                                <div class="white-bg section-box-shadow">
                                    <h3 class="form-page-title">Stamp Register</h3>
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-offset-1 col-sm-10">
                                            <div class="form-box">
                                                <form>
                                                    @Html.HiddenFor(model=>model.HiddenAdditionalStamp)
                                                    @Html.HiddenFor(model => model.Id)

                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-4">
                                                            <div class="form-group">
                                                                <label>Inspector Name:</label>
                                                                <input type="hidden" id="hfCustomer" name="CustomerId" />
                                                                @Html.HiddenFor(model => model.SurveyorId)
                                                                @Html.TextBoxFor(model => model.SurveyorName, new { @placeholder = "Surveyor Name", @class = "form-control" })
                                                                @Html.ValidationMessageFor(model => model.SurveyorName, "", new { @class = "text-danger validation-msg" })
                                                            </div>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-4">
                                                            <div class="form-group">
                                                                <label>Branch:</label>
                                                                @Html.TextBoxFor(model => model.Location, new { @placeholder = "Location", @class = "form-control" })
                                                                @Html.ValidationMessageFor(model => model.Location, "", new { @class = "text-danger validation-msg" })
                                                            </div>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-4">
                                                            <div class="form-group">
                                                                <label>Stamp Number:</label>
                                                                @Html.TextBoxFor(model => model.StampNumber, new { @placeholder = "Stamp Number", @class = "form-control" })
                                                                @Html.ValidationMessageFor(model => model.StampNumber, "", new { @class = "text-danger validation-msg" })
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-4">
                                                            <div class="form-group">

                                                                <label>Joining Date:</label>
                                                                @*@Html.TextBoxFor(model => model.JoiningDate, "{0:dd/MMMM/yyyy}", htmlAttributes: new { placeholder = "Select Joining Date", @class = "form-control form-control-custom JoiningDate", autocomplete = "off" })*@
                                                                @*@Html.TextBoxFor(model => model.JoiningDate, new { @placeholder = "Joining Date", @class = "form-control" })*@
                                                                @Html.TextBoxFor(model => model.JoiningDate, "{0:dd/MMMM/yyyy}", htmlAttributes: new { placeholder = "Select Date", @class = "form-control form-control-custom JoiningDate", autocomplete = "off" })



                                                                @*@Html.TextBoxFor(model => model.StartDate, "{0:dd/MMMM/yyyy}", htmlAttributes: new { placeholder = "Select Start Date", @class = "form-control form-control-custom StartDate", autocomplete = "off" })*@
                                                            </div>
                                                        </div>
                                                        

                                                    </div>

                                                    @*<div class="row">
                                                        <div class="col-xs-12 col-sm-4">
                                                            <div class="form-group">
                                        @foreach (var v in ViewData["Image"] as IEnumerable<TuvVision.Models.StampImageList>)
                                        {
                                                 <label>Image :</label>
                                                 <img alt="" src="@v.attachment" style="height:100px;width:100px;" />
                                        }
                                                            </div>
                                                        </div>
                                                    </div>*@


                                                    @*<div class="col-xs-12">
                                                        <table id="partialtable" class="hidden table table-bordered" cellspacing="0" width="100%">
                                                            <tr style="background-color:blue; color:white;">
                                                                <th class="remove-search less-width">Check Box</th>
                                                                <th class="remove-search less-width">Name</th>
                                                                <th class="remove-search less-width">Image</th>
                                                            </tr>
                                                            <tbody id="partialtabledata"></tbody>
                                                        </table>
                                                    </div>*@
                                                    @if (ViewData["Image"] != null)
                                                    {
                                                        <div class="col-xs-12">
                                                            <table id="example"  cellspacing="0" width="100%" class="table table-bordered">
                                                                <thead>
                                                                    <tr style="background-color:blue; color:white;">
                                                                        <th class="remove-search less-width">Check Box</th>
                                                                        <th class="remove-search less-width">Type</th>
                                                                        <th class="remove-search less-width">Name</th>
                                                                        <th class="remove-search less-width">Image</th>
                                                                        <th class="remove-search less-width">Quantity</th>
                                                                        
                                                                </thead>
                                                                <tbody id="partialtabledata">
                                                                                                                                        @*@{
        if(Model.AdditionalStamp!=null)
        {
             ps = Model.AdditionalStamp.Split(',');
        @(Model.AdditionalStamp ?? string.empty)
        }

    }*@

                                                                    @if (ViewData["Image"] != null)
                                                                    {
                                                                        foreach (var item in ViewData["Image"] as IEnumerable<TuvVision.Models.StampImageList>)
                                                                        {
                                                                            <tr>
                                                                                
                                                                                <td>
                                                                                    @*@Html.CheckBoxFor(model => model.chkImageId,new { @placeholder = "Joining Date", @class = "form-control" })*@
                                                                                
                                                                                    

                                                                                    
                                                                                    @*<input type="checkbox" class="checkBox"  name="ID"  value="@item.ImageId" checked="ViewData["ImageUpdate"]"/>*@
                                                                                   
                                                                                    @if (Model ==null)
                                                                                    {
                                                                                        <input type="checkbox" class="checkBox" name="ID_" value="@item.ImageId">
                                                                                    }
                                                                                    else if (Model.AdditionalStamp.Contains(Convert.ToString(item.ImageId)))
                                                                                    {
                                                                                        <input type="checkbox" class="checkBox" name="ID_" value="@item.ImageId" checked="checked">
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <input type="checkbox" class="checkBox" name="ID_" value="@item.ImageId">
                                                                                    }


                                                                                  </td>
                                                                                <td>@item.Type</td>
                                                                                <td>@item.ImageName</td>
                                                                                <td><img src="@Url.Content(String.Format("~/StampMasterDocument/{0}", item.attachment))" style="width:100px; height:50px;" /></td>
                                                                                <td>@item.Quantity</td>
                                                                                
                                                                            </tr>
                                                                        }
                                                                    }

                                                                </tbody>
                                                            </table>


                                                            @*@foreach (var imgPath in Directory.GetFiles(Server.MapPath("~/Content/uploads"), "*.jpg"))
                                                            {
                                                                var img = new FileInfo(imgPath);
                                                                <img src="@Url.Content(String.Format("~/Content/uploads/{0}", img.Name))" />
                                                            }*@

                                                        </div>
                                                    }

                                                <div class="row">
                                                    <div class="col-xs-12 col-md-12">
                                                        <div class="form-group">
                                                            <label>Reason for Modification (if required):</label>
                                                            @Html.TextAreaFor(model => model.Remarks, new { @placeholder = "Please enter Reason for Modification(if required)", @class = "form-control", @rows = 10})
                                                            @Html.ValidationMessageFor(model => model.Remarks, "", new { @class = "text-danger validation-msg" })
                                                        </div>
                                                    </div>
                                                </div>

                                                                <div class="row">
                                                                    
                                                                    <div class="col-xs-12 col-sm-4">

                                                                        <div class="form-group">

                                                                            <button type="submit" class="btn btn-default insert-form-btn"> Save </button>
                                                                            @*<button type="submit" class="btn btn-default insert-form-btn" > Stamp Master </button>*@
                                                                            
                                                                            @*<a href="@Url.Action("listStampMaster", "stampmaster", new { })" class="btn btn-default insert-form-btn" title="Stamp Master">Stamp Master</a>*@

                                                                        </div>
                                                                    </div>
                                                                    <div class="col-xs-12 col-sm-4">
                                                                    </div>
                                                                </div>


                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

@*Auto Fill Training Name*@
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

@*<script type="text/javascript">*@
    <script>
$(document).ready(function () {
    $("#SurveyorName").autocomplete({
        source: function (request, response) {


               $.ajax({
                  // url: "/StampRegister/GetSurveyorName",
                   url: '@Url.Action("GetSurveyorName", "StampRegister")',


                   type: "POST",
                   dataType: "json",
                   data: { Prefix: request.term },
                   success: function (data) {


                   //    response($.map(data, function (item) {
                       response($.map(data, function (item) {

                           return {label: item.SurveyorName,value: item.SurveyorName };

                       }))




                   },
                   select: function (event, ui) {

                       $("#SurveyorId").val(ui.item.label); // save selected id to hidden input

               },
                   minLength: 1


               }
               )

           },


           messages: {
               noResults: "", results: ""
           }
       });
}

)



    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js">
        </script>
   
    @*<script type="text/javascript">

        $(document).ready(function () {
            alert("A")
            $("#SurveyorName").change(function () {

        
    $.ajax({

        type: 'POST',
        
                    dataType:'json',
                    data: { S: request.term },
                    //url: "/StampRegister/GetDateOfJoining",
                    url: '@Url.Action("StampRegister", "GetDateOfJoining")',
                    success : function(result){
                        $('#JoiningDate').val(result.JoiningDate);
                        
                    }
                });

            });
        });
    </script>*@
   






    <!--
    @*<script>
        $('#SurveyorName').change(function ()
    {
        debugger;

        var Category = $('#SurveyorName').val();
        
        if (Category != "" )
        {


        $.ajax({
           
            url: '@Url.Action("GetDateOfJoining", "StampRegister")',
           
            type: 'GET',
            datatype: 'json',
            data: { Category: Category },


            success: function (JoiningDate1)
            {
                debugger;

                $('#JoiningDate').val(JoiningDate1);


            }
        });

        }
       
    });
    </script>*@
        -->

    <script type="text/javascript">
    $(document).ready(function () {


        $('#SurveyorName').change(function ()
        {
            debugger;
            var IRNReport = $('#SurveyorName').val();

            $.ajax({
                type: "post",
                url: '@Url.Action("GetDataByName", "StampRegister")',
              
                data: { IRNReport: IRNReport},
                datatype: "json",
                traditional: true,
                success: function (objModel)
                {
                    
                    $('#JoiningDate').val(objModel.JoiningDate1).val()
                    $('#Location').val(objModel.Location).val()

                }

                //success: function (objModel)
                //{
                //    if (response == 'success') 
                         
                //        $('#JoiningDate').val(objModel.JoiningDate1).val(),
                //    $('#Location').val(objModel.Location).val();
                //    else 
                //        alert("Not Valid")
                //}

            

            });
       
            //});
        });

    });
    </script>




@*Calender Control*@
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

    <script>
    $(function () {
        $(".JoiningDate").datepicker({
        dateFormat: 'dd/MM/yy',//check change
            changeMonth: true,
            changeYear: true,
            yearRange: "-100:+50"

        });
    });
    </script>

    @*if(TempData["notice"] != null)
    {
    <script>
    
        alert("ABC");
   
    </script>
    }*@

    {
        if (TempData["Chkmessage"] != null)
        {
            <script type="text/javascript">
        alert(@Html.Raw(Json.Encode(TempData["Chkmessage"])));
            </script>
        }
    }








        }

