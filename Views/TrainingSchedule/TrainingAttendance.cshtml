@model TuvVision.Models.TrainingScheduleModel
@{
    ViewBag.Title = "TrainingAttendance";
    Layout = "~/Views/Shared/_TuvVision.cshtml";
    int k = 0;
    int i = 0;
}


@*<style>
    .abc {
border:2px solid green; 
height: 300px; 
overflow: scroll;
}
.abct, td, th {
border-collapse:collapse; 
border:1px solid #777; 
min-width: 300px;}
</style>*@
<style>
    #customers {
        /*font-family: Arial, Helvetica, sans-serif;*/
        font-family:'TNG Pro';
        border-collapse: collapse;
        width: 100%;
    }

        #customers td, #customers th {
            border: 1px solid #ddd;
            padding: 8px;
        }

        #customers tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        #customers tr:hover {
            background-color: #ddd;
        }

        #customers th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: left;
            /*background-color: #04AA6D;*/
            background-color: #001ED2;
            color: white;
        }
</style>

<style>
    #myInput {
        background-image: url('/css/searchicon.png'); /* Add a search icon to input */
        background-position: 10px 12px; /* Position the search icon */
        background-repeat: no-repeat; /* Do not repeat the icon image */
        width: 100%; /* Full-width */
        font-size: 14px; /* Increase font-size */
        /*padding: 12px 20px 12px 40px;*/ /* Add some padding */
        padding: 6px 19px 5px 16px;
        border: 1px solid #ddd; /* Add a grey border */
        margin-bottom: 12px; /* Add some space below the input */
    }

    table {
        /*font-family: arial, sans-serif;*/
        font-family:'TNG Pro';
        border-collapse: collapse;
        width: 100%;
    }

    /*td, th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }*/
    td {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
        
    }

    th {
        padding-top: 12px;
        padding-bottom: 12px;
        text-align: left;
        /*background-color: #04AA6D;*/
        background-color: #001ED2;
        color: white;
        
    }


    tr:nth-child(even) {
        background-color: #f2f2f2;
    }
</style>

@using (Html.BeginForm("TrainingAttendance", "TrainingSchedule", FormMethod.Post, new { enctype = "multipart/form-data", @id = "formta" }))
{
    <div class="main-content3 xs-max-height grey-bg-f3">
        <div class="grey-bg-f3">
            <!--Start of header-->
            <div class="container-fluid">
                <div class="row assignfixedwidth rp-5">

                    <div class="col-xs-12 form-col">
                        <a href="@Url.Action("Export", "TrainingSchedule" , new {@PK_TrainingScheduleId = Model.PK_TrainingScheduleId })" class="btn btn-default insert-form-btn">Export To Excel</a>
                        <a href="@Url.Action("TrainingSchedule", "TrainingSchedule" , new {@UserID = Model.PK_TrainingScheduleId })" class="btn btn-default insert-form-btn" style="float:right;"><i class="fa fa-long-arrow-left"></i> Go Back</a>
                        @*<a href="@Url.Action("ListScheduleTraining", "TrainingSchedule")" class="btn btn-default insert-form-btn" style="float:right;"><i class="fa fa-long-arrow-left"></i> Go Back</a>*@
                        <br />
                        <br />
                        <div class="row">



                            <div class="col-xs-12">
                                <div class="white-bg section-box-shadow">
                                    <h3 class="form-page-title">Training Attendance - @ViewBag.TrngNm</h3>
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-offset-1 col-sm-10">
                                            <div class="form-box">
                                                <form>
                                                    <div class="row">
                                                        <div class="col-xs-12 col-sm-4">
                                                            @Html.HiddenFor(model => model.PK_TrainingScheduleId)
                                                        </div>
                                                    </div>

                                                    @*<h3 class="form-page-title">@ViewBag.TrngNm</h3>*@
                                                    
                                                    
                                                    <div class="col-xs-12" style="height: 1000px;overflow: scroll;">
                                                        @*<div class="col-xs-12" style="border:2px solid green;height: 300px;overflow: scroll;">*@
                                                        @*<table id="example" class="display" cellspacing="0" width="100%">*@
                                                        <table id="myTable" class="abct" cellspacing="0" width="100%">
                                                            <thead>
                                                                <tr>

                                                                    <th>Sr.No</th>
                                                                    <th>Trainee Name:</th>
                                                                    <th>Branch:</th>
                                                                    <th>Mobile No:</th>
                                                                    <th>Email:</th>
                                                                    <th>EmployementCategory:</th>
                                                                    <th>Is Present <input type="checkbox" id="checkBoxAll" /></th>

                                                                </tr>
                                                            </thead>

                                                            <tbody>
                                                                @Html.HiddenFor(m => m.RTrainingScheduleId, new { Value = ViewBag.Data })

                                                                @foreach (var v in ViewBag.Trainee as IEnumerable<TuvVision.Models.TrainingRecordList>)
                                                                {
                                                                    i = i + 1;
                                                                    <tr>
                                                                        <td scope="row"> @i </td>
                                                                        <td>
                                                                            @v.RTraineeName



                                                                            @Html.HiddenFor(m => m.TrainingRecordList[k].RTraineeId, new { Value = v.RTraineeId })
                                                                            @Html.HiddenFor(m => m.TrainingRecordList[k].RTraineeName, new { Value = v.RTraineeName })
                                                                            @Html.HiddenFor(m => m.TrainingRecordList[k].PK_ID, new { Value = v.PK_ID })
                                                                            @Html.HiddenFor(m => m.TrainingRecordList[k].EmpType, new { Value = v.EmpType })
                                                                        </td>
                                                                        <td class="show-read-more">@v.Branch</td>
                                                                        <td>@v.MobileNo</td>
                                                                        <td>@v.Email</td>
                                                                        <td>@v.EmployementCategory</td>
                                                                        <td>
                                                                            @*@Html.CheckBoxFor(m => m.TrainingRecordList[k].RIsPresent)*@
                                                                            @if (v.RIsPresent == true)
                                                                            {
                                                                                @Html.CheckBoxFor(m => m.TrainingRecordList[k].RIsPresent, new { @checked = "checked", @class = "checkBox" })
                                                                            }
                                                                            else
                                                                            {
                                                                                @Html.CheckBoxFor(m => m.TrainingRecordList[k].RIsPresent, new { @class = "checkBox" })
                                                                            }
                                                                        </td>
                                                                    </tr>
                                                                    k++;
                                                                }
                                                            </tbody>
                                                        </table>
                                                    </div>

                                                    @if (Model.TrainType != "ELearn")
                                                    {
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                <div class="form-group">
                                                                    @*<button type="reset" class="btn btn-default insert-form-btn"> Reset </button>*@
                                                                    <button type="submit" class="btn btn-default insert-form-btn"> Mark Attendance </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    }
                                                   
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<script>
$(document).ready(function(){
    var maxLength = 10;
    $(".show-read-more").each(function(){
        var myStr = $(this).text();
        if($.trim(myStr).length > maxLength){
            var newStr = myStr.substring(0, maxLength);
            var removedStr = myStr.substring(maxLength, $.trim(myStr).length);
            $(this).empty().html(newStr);
            $(this).append(' <a href="javascript:void(0);" class="read-more">read more...</a>');
            $(this).append('<span class="more-text">' + removedStr + '</span>');
        }
    });
    $(".read-more").click(function(){
        $(this).siblings(".more-text").contents().unwrap();
        $(this).remove();
    });
});
</script>
<style>
    .show-read-more .more-text {
        display: none;
    }
</style>

<script>
    $(document).ready(function () {
        $('#checkBoxAll').click(function () {
            $(".checkBox").prop('checked', $(this).prop('checked'));
        });
        $(".checkBox").click(function () {
            if ($(".checkBox").length == $(".checkBox:checked").length) {
                $('#checkBoxAll').attr("checked", "checked");
            }
            else {
                $('#checkBoxAll').removeAttr("checked");
            }
        });
    });
</script>