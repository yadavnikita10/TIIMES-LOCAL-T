@model TuvVision.Models.TrainingScheduleModel
@using NonFactors.Mvc.Grid;
@using System.Web.Mvc;
@{
    ViewBag.Title = "TrainingRecord";
    Layout = "~/Views/Shared/_TuvVision.cshtml";
}


@*...Calender Control...*@
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>


@*Date Picker for From Date*@

<script>
    $(function () {
        $(".FromD").datepicker({
            dateFormat: 'dd/mm/yy',//check change
            changeMonth: true,
            changeYear: true,
            yearRange: "-100:+50"
        });
    });
</script>
<script>
    $(function () {
        $(".ToD").datepicker({
            dateFormat: 'dd/mm/yy',//check change
            changeMonth: true,
            changeYear: true,
            yearRange: "-100:+50"
        });
    });
</script>




<div class="main-content3 xs-max-height">

    <!--Start of header-->
    <div class="container-fluid">
        <div class="row assignfixedwidth rp-15">

          <div class="col-xs-12">
                    @*<h3 class="dynamic-page-title dynamic-page-title-2  text-left">Training Record </h3>*@
                    <button type="button" id="a" value="ExportToExcel" class="btn btn-info dynamic-function-btn dynamic-function-btn-2" onclick="location.href='@Url.Action("TrainingRecordExport", "TrainingSchedule")'">
                        Export To Excel
                    </button>
                </div><!-- /.col -->
            <!--Table was here-->

            <div class="col-xs-12">
                <hr class="custom-hr">
            </div><!-- /.col -->
        </div>


        @using (Html.BeginForm("TrainingRecord", "TrainingSchedule", FormMethod.Post, new { enctype = "multipart/form-data", @id = "form1" }))
        {
            <div class="row">
                <div class="col-xs-4">
                    <div class="form-group">
                        <label>From Date:</label>
                        @Html.TextBoxFor(model => model.FromDate, "{0:dd MMM yyyy}", htmlAttributes: new { placeholder = "Select From Date", @class = "form-control form-control-custom FromD", autocomplete = "off" })
                    </div>
                </div>


                <div class="col-xs-4">
                    <div class="form-group">
                        <label>To Date:</label>
                        @Html.TextBoxFor(model => model.ToDate, "{0:dd MMM yyyy}", htmlAttributes: new { placeholder = "Select To Date", @class = "form-control form-control-custom ToD", autocomplete = "off" })
                    </div>

                </div>

                <div class="col-xs-2">
                    <div class="form-group">
                        <label>Search:</label>
                        <input type="submit" value="Search" class="btn btn-primary form-control" />
                        @*<button type="button" class="btn btn-primary form-control" id="btnSearch"> Search </button>*@
                    </div>

                </div>
            </div>

            <div class="row">
                <div class="col-xs-12">
                    <table style="margin-bottom:20px;margin-left:20px;">
                        <tr>

                            <td style="text-align:center;width:147px;font-size:smaller;background-color:#FFEB00;height:30px;">Training Scheduled - TS</td>
                            <td style="width:20px;height:30px;"></td>
                            <td style="text-align:center;width:147px;font-size:smaller;background-color:orange;height:30px;">Training Attended - TSA</td>
                            <td style="width:20px;height:30px;"></td>
                            <td style="text-align:center;width:120px;font-size:smaller;background-color:#8CF000;height:30px;">Training Pass - P</td>
                            <td style="width:20px;height:30px;"></td>
                            <td style="text-align:center;width:120px;font-size:smaller;background-color:#FA3746;height:30px;">Training Fail - F</td>
                        </tr>
                    </table>
                </div>
            </div>




                <div class="col-xs-12">
                    <table id="example" class="display" cellspacing="0" width="100%" border="1">
                        @{
                            int colspanno = 0;
                            int nullcount = 0;
                            int LeaveCount = 0;
                            int SelectDays = 0;
                            string DayName = string.Empty;
                            double filledPercentage = 0;

                            int colcnt2 = 0;
                            int colcnt1 = 0;
                        }

                        @*@for (int colcnt = 0; colcnt < Model.dtActivityMaster.Columns.Count; colcnt++)
                            {
                                System.Data.DataRow row = Model.dtActivityMaster.Rows[colcnt];

                                SelectDays = Convert.ToInt32(row[colcnt]);

                                <td style="text-align:center;width:120px;font-size:smaller;">@SelectDays</td>
                            }*@

                        <tr style="background-color:#709eed">
                            @for (colcnt1 = 0; colcnt1 < Model.dtActivityMaster.Columns.Count; colcnt1++)
                            {

                                <td style="text-align:center;width:150px;font-size:smaller;color:black">@Model.dtActivityMaster.Columns[colcnt1].ColumnName</td>

                            }
                        </tr>
                        @for (colcnt2 = 0; colcnt2 < Model.dtActivityMaster.Rows.Count; colcnt2++)
                        {
                            <tr>
                                @*<td style="text-align:center;width:150px;font-size:smaller;color:white">@Model.dtActivityMaster.Columns[colcnt1].ColumnName</td>*@
                                @for (colcnt1 = 0; colcnt1 < Model.dtActivityMaster.Columns.Count; colcnt1++)
                                {
                                    System.Data.DataRow row = Model.dtActivityMaster.Rows[colcnt2];

                                    if (row[colcnt1].ToString() == "TS")
                                    {
                                        <td style="text-align:center;width:120px;font-size:smaller;background-color:yellow;">@row[colcnt1]</td>
                                    }
                                    else if (row[colcnt1].ToString() == "TSA")
                                    {
                                        <td style="text-align:center;width:120px;font-size:smaller;background-color:orange;">@row[colcnt1]</td>
                                    }
                                    else if (row[colcnt1].ToString() == "P")
                                    {
                                        <td style="text-align:center;width:120px;font-size:smaller;background-color:green;">@row[colcnt1]</td>
                                    }
                                    else if (row[colcnt1].ToString() == "F")
                                    {
                                        <td style="text-align:center;width:120px;font-size:smaller;background-color:red;">@row[colcnt1]</td>
                                    }
                                    else
                                    {
                                        <td style="text-align:center;width:120px;font-size:smaller;">@row[colcnt1]</td>
                                    }

                                    @*<td style="text-align:center;width:120px;font-size:smaller;">@row[colcnt1]</td>*@
                                }

                            </tr>
                            colcnt1++;
                            colcnt2++;
                        }




                    </table>

                </div>
                            }
    </div>

</div>


<script type="text/javascript" language="javascript" src="~/AllJsAndCss/datatable/js/jquery.dataTables.js"></script>
<script src="~/AllJsAndCss/js/datatable-custom2.js"></script>


<script type="text/javascript">
    $(document).ready(function () {
        $("#btnSearch").click(function myfunction() {
            debugger;
            if (ValidateForm() == false) {
                return false;
            }
            else {
                $("#form1").submit()
            }
        });
    });

    function ValidateForm() {

        if ($("#FromDate").val() == "") {
            alert('Select From Date!');
            return false;
        }
        if ($("#ToDate").val() == "") {
            alert('Select To Date!');
            return false;
        }
        debugger;
        if ($("#FromDate").val() > $("#ToDate").val()) {
            alert("To Date Selected is Greater than From Date  !!!");
            return false;
        }

        else {
            return true;

        }
    }
</script>
