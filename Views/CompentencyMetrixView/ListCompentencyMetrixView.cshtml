@model IEnumerable<TuvVision.Models.CompentencyMetrixView>
@{
    ViewBag.Title = "ListCompentencyMetrixView";
    Layout = "~/Views/Shared/_TuvVision.cshtml";
    int date;
}

<div class="main-content3 xs-max-height">

    <!--Start of header-->
    <div class="container-fluid">
        <div class="row assignfixedwidth rp-15">

            <div class="col-xs-12">
                <h3 class="dynamic-page-title dynamic-page-title-2  text-left">Customer Approved Inspectors List (CAIL)</h3>
                @*<button type="button" value="CreateRole" class="btn btn-info dynamic-function-btn dynamic-function-btn-2" onclick="location.href='@Url.Action("CompentencyMetrixView", "CompentencyMetrixView")'">Create Competency Matrix</button>*@
            </div><!-- /.col -->

            <div class="col-xs-12">
                <hr class="custom-hr">
            </div><!-- /.col -->
            <!--Table was here-->

        </div>
        <div class="col-xs-12">
            <table id="example" class="display" cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <th class="hidden">Id</th>
                        <th class="remove-search">Action</th>
                        <th>PK_UserId</th>
                        <th>Candidate Name</th>
                        @*<th>Employment Category</th>*@
                        <th>Stamp number</th>
                        <th>Branch</th>
                        <th>Educational Qualification</th>
                        @*<th>Professional Qualification</th>*@
                        <th>Designation</th>
                        <th>Email ID</th>
                        <th>Mobile Number</th>
                        <th>Joining Date</th>
                        <th>Past Experience in Year Month</th>
                        <th>Number Of Years With TUV India Year Month</th>
                        <th>Total Experience Year Month</th>
                        @foreach (var item in ViewData["Name"] as IEnumerable<TuvVision.Models.CompentencyMetrixView>)
                        {

                            <th >
                                @item.CompentencyMetrixMasterName
                                @*<br />
                                <img src="http://localhost:54895/StampMasterDocument/@item.attachment" style="width:25px; height:25px;" />*@
                                
                            </th>

                        }
                        
                        
                       
                    </tr>
                </thead>

                <tbody>
                    <tr class="hidden">
                        <td class="hidden">Id</td>
                        <td class="remove-search"></td>
                        <td>PK_UserId</td>
                        <td>Candidate Name</td>
                        @*Employment category stamp number*@ 
                        @*<td>Employment Category</td>*@
                        <td>Stamp Number</td>
                        <td>Branch</td>
                        <td>Educational Qualification</td>
                        @*<td>Professional Qualification</td>*@

                        <td>Designation</td>
                        <td>Email Id</td>
                        <td>Mobile Number</td>
                        <td>Joining Date</td>
                        <td>Past Experience in Year Month</td>
                        <td>Number Of Years With TUV India Year Month</td>
                        <td>Total Experience Year Month</td>
                        @foreach (var item in ViewData["Name"] as IEnumerable<TuvVision.Models.CompentencyMetrixView>)
                        {

                            <td class="remove-search less-width">
                                @item.CompentencyMetrixMasterName
                                @*<br />
                <img src="http://localhost:54895/StampMasterDocument/@item.attachment" style="width:25px; height:25px;" />*@

                            </td>

                        }

                        


                    </tr>

                    <tr class="hidden">
                        <td class="hidden"></td>
                        <td></td>
                        <td></td>
                        
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        @*<td></td>*@

                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        @foreach (var item in ViewData["Name"] as IEnumerable<TuvVision.Models.CompentencyMetrixView>)
                        {

                            <td class="remove-search less-width">
                                @*@item.CompentencyMetrixMasterName*@
                                @*<br />
                <img src="http://localhost:54895/StampMasterDocument/@item.attachment" style="width:25px; height:25px;" />*@

                            </td>

                        }

                        <td></td>


                    </tr>

                    @foreach (var b in Model)
                    {
                        {
                            //date = DateTime.Now.Date.Subtract(b.JoiningDate);

                            @*@Html.DisplayTextFor(model => date.Years);*@
                        }
                        <tr>
                            <td class="hidden">@b.Id</td>
                            <td cRemarkslass="action-btn" style="text-align:center;">
                                <a href="@Url.Action("CompentencyMetrixView", "CompentencyMetrixView", new { @Id = b.PK_userId })" class="btn btn-info btn-xs" title="Edit"><i class="fa fa-pencil"></i></a>

                                @*<a href="@Url.Action("Delete", "CompentencyMetrixView", new { @Id = b.Id })" class="delete" onclick="return confirm('Are you sure you wish to Delete selected Record?');" title="Delete"><i class="fa fa-trash"></i></a>*@

                            </td>
                            <td>@b.PK_userId</td>
                            <td>@b.CandidateName</td>
                            @*<td>@b.EmployeeCategory</td>*@
                            <td>@b.StampNumber</td>
                            <td>@b.Location</td>
                            <td>@b.EducationalQualification  </td>
                            @*<td>@b.AdditionalQualification   </td>*@
                            <td>@b.Designation               </td>
                            <td>@b.EmailId                   </td>
                            <td>@b.CellPhoneNumber           </td>
                            <td>@b.JoiningDate1              </td>
                            <td>@b.TotalExperienceInYears    </td>
                            <td>@b.TotalTUVExperience </td>
                            <td>@b.OverAllExp</td>

                            @{
                                string[] ps;
                                ps = b.CheckBoxValue.Split(',');//2,3



                                foreach (var item in ViewData["Name"] as IEnumerable<TuvVision.Models.CompentencyMetrixView>)
                                {

                                      <td>

                                        @if (ps.FirstOrDefault() == null) // ps !=null
                                        {
                                            <span> No </span>
                                        }
                                        else if (ps.Contains(Convert.ToString(item.CompentencyMetrixMasterId)))
                                        {
                                            <span> Yes </span>
                                        }
                                        else
                                        {
                                            <span> No </span>
                                        }

                                    </td>
                                }

                            }

                          
                            

                        </tr>
                                }
                </tbody>

            </table>

        </div>
    </div>

</div>

<script type="text/javascript" language="javascript" src="~/AllJsAndCss/datatable/js/jquery.dataTables.js"></script>

<!--export to excel-->
<script type="text/javascript" language="javascript" src="~/AllJsAndCss/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" language="javascript" src="~/AllJsAndCss/js/jszip.min.js"></script>
<script type="text/javascript" language="javascript" src="~/AllJsAndCss/js/buttons.html5.min.js"></script>
<script src="~/AllJsAndCss/js/datatable-custom2.js"></script>